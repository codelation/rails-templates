<div class="title">
  <h1>Connected Accounts</h1>
</div>

<div class="outer-container">
  <%= render partial: "#{params[:resource_name]}/sidebar" %>

  <div class="page">
    <% User.omniauth_providers.each do |provider_name| %>
      <% provider = @subscriber.omni_auth_providers.where(name: provider_name).first %>
      <% if provider %>
        <%= link_to subscriber_omni_auth_provider_path(id: provider.id),
                    method: :delete,
                    class: "button provider disconnect",
                    data: { confirm: "Are you sure you want to disconnect this account?" } do %>
          <%= image_tag "omni_auth_providers/#{provider_name}.png" %>
          <span>Connected</span>
        <% end %>
      <% else %>
        <%= link_to user_omniauth_authorize_path(provider_name), class: "button provider connect" do %>
          <%= image_tag "omni_auth_providers/#{provider_name}.png" %>
          <span>Connect</span>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>
